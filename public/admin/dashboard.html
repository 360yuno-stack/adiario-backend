<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Dashboard - A DIARIO</title><style>*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,sans-serif}body{background:#f5f7fa;min-height:100vh}.header{background:white;padding:20px;box-shadow:0 2px 10px rgba(0,0,0,0.1);margin-bottom:30px}h1{color:#333}.container{max-width:1200px;margin:0 auto;padding:0 20px}.card{background:white;padding:30px;border-radius:12px;box-shadow:0 2px 10px rgba(0,0,0,0.05);margin-bottom:20px}h2{color:#333;margin-bottom:20px}.form-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-bottom:20px}input{padding:12px;border:2px solid #e0e0e0;border-radius:8px;font-size:14px;width:100%}input:focus{outline:none;border-color:#667eea}.btn{padding:12px 24px;background:#667eea;color:white;border:none;border-radius:8px;cursor:pointer;font-weight:600;transition:background .3s}.btn:hover{background:#5568d3}.btn-full{width:100%}.empleados-list{margin-top:30px}.empleado-item{background:#f9fafb;padding:15px;border-radius:8px;margin-bottom:10px;display:flex;justify-content:space-between;align-items:center}.empleado-info h3{color:#333;margin-bottom:5px}.empleado-info p{color:#666;font-size:14px}.link-box{background:#e7f3ff;padding:10px;border-radius:6px;margin-top:10px;word-break:break-all;font-size:13px;color:#0066cc}.success{background:#d4edda;color:#155724;padding:15px;border-radius:8px;margin-bottom:20px;display:none}</style></head><body><div class="header"><div class="container"><h1> Dashboard - A DIARIO</h1></div></div><div class="container"><div class="card"><h2> Crear Nuevo Empleado</h2><div class="success" id="success"></div><form id="crearForm"><div class="form-grid"><input type="text" id="nombre" placeholder="Nombre completo" required><input type="tel" id="telefono" placeholder="Teléfono (con código país)" required><input type="email" id="email" placeholder="Email (opcional)"></div><button type="submit" class="btn btn-full">Crear y Enviar Link por WhatsApp</button></form></div><div class="card"><h2> Empleados Registrados</h2><div id="empleadosList"></div></div></div><script>async function cargarEmpleados(){try{const r=await fetch('/api/admin/empleados');const d=await r.json();const lista=document.getElementById('empleadosList');if(d.ok&&d.usuarios.length>0){lista.innerHTML=d.usuarios.map(u=>`<div class="empleado-item"><div class="empleado-info"><h3>${u.nombre}</h3><p> ${u.telefono} ${u.email?'|  '+u.email:''}</p><p> Token: ${u.token}</p><div class="link-box"> ${window.location.origin}/e/${u.token}</div></div></div>`).join('')}else{lista.innerHTML='<p>No hay empleados registrados</p>'}}catch(e){console.error(e)}}document.getElementById('crearForm').addEventListener('submit',async(e)=>{e.preventDefault();const nombre=document.getElementById('nombre').value;const telefono=document.getElementById('telefono').value;const email=document.getElementById('email').value;const succ=document.getElementById('success');try{const r=await fetch('/api/admin/crear-empleado',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({nombre,telefono,email})});const d=await r.json();if(d.ok){succ.textContent=` Empleado creado. Link enviado por WhatsApp a ${telefono}`;succ.style.display='block';document.getElementById('crearForm').reset();setTimeout(()=>succ.style.display='none',5000);cargarEmpleados()}else{alert('Error: '+d.error)}}catch(e){alert('Error de conexión')}});cargarEmpleados();</script></body></html>
